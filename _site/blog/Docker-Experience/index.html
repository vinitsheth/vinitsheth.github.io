<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->

<head>
    <style type="text/css">
	    .article-wrap img{border-radius: 5px;}
		.titled-image figure{text-align: center;}
	</style>
	<meta charset="utf-8">
<title>Vinit Sheth's Website  &#8211; Docker Beginner's Guide </title>
<meta name="description" content="">
<meta name="keywords" content="Software Engineering">




<!-- MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker Beginner's Guide">
<meta property="og:description" content="Welcome to my site.">
<meta property="og:url" content="http://localhost:4000/blog/Docker-Experience/">
<meta property="og:site_name" content="Vinit Sheth's Website">





<link rel="canonical" href="http://localhost:4000/blog/Docker-Experience/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Vinit Sheth's Website Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.min.css">
<link rel="stylesheet" href="http://localhost:4000/assets/academicons.css" />

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">

<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="192x192" href="http://localhost:4000/images/apple-icon-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://localhost:4000">Vinit Sheth's Website</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				<li><a href="http://localhost:4000/cv/" >Curriculum</a></li>
		        
				<li><a href="http://localhost:4000/projects/" >Projects</a></li>
		        
				<li><a href="http://localhost:4000/courses/" >Courses</a></li>
		        
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
	<img src="http://localhost:4000/images//author_images/VinitSmall.jpg" class="bio-photo" alt="Vinit Sheth bio photo"></a>

<h3>Vinit Sheth</h3>
<p>Data Science , Machine Learning, Artificial Intelligence.</p>



<a href="http://linkedin.com/in/vinit-sheth" class="author-social" target="_blank"><i class="fa fa-linkedin-square"></i> LinkedIn</a>


<a href="http://github.com/vinitsheth" class="author-social" target="_blank"><i class="fa fa-github-square"></i> GitHub</a>









<a href="http://facebook.com/vinitgsheth" class="author-social" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>
<a href="mailto:vsheth2@asu.edu" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> E-Mail</a>
<a href="https://drive.google.com/open?id=1ElcWvlcYgbx_Pw4amAY230AAM5meI6zQ" class="author-social" target="_blank"><i class="fa fa-file"></i>Resume</a>
  </div>
  <article>
    <div class="headline-wrap">
      
        <h1><a href="http://localhost:4000/blog/Docker-Experience/" rel="bookmark" title="Docker Beginner's Guide">Docker Beginner's Guide</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <h3 id="introduction">Introduction</h3>

<p>Docker has become widely used in companies and education institutions for its convenience and portability compared to virtual machines. I was actually “forced” to used Docker and honestly I hated to use it probably because of the steepness at the beginning of the learning curve.</p>

<p><br /></p>

<p>Here I documented some of the problems I met during my work and the potential solutions to solve them.</p>

<div class="titled-image">
<figure class="titled-image">
    <img src="http://localhost:4000/images/blog/2018-04-12-Docker-Experience/laurel-docker-containers.png" />
    <figcaption>Carefully Working with Docker</figcaption>
</figure>
</div>

<h3 id="use-docker-as-app-vs-virtual-machine">Use Docker As App vs Virtual Machine</h3>

<p>I first learned how to use Docker from the official tutorials on the Docker website. It basically taught you how to set up a portable web application in Docker. For developed software shippment, it is perfectly fine to use Docker as an App. However, in terms of software development, which requires debugging and some auxilliary components other than the software itself, using Docker as a Virtual Machine might be better.</p>

<p><br /></p>

<p>When I say use Docker as an app, I mean you can just run the docker and wait for the response as a software program. The Docker container has been preset with <code class="highlighter-rouge">CMD</code>, and all some part of your auxilliary files might have already been copied to the Docker container. Because the Docker container has been set with <code class="highlighter-rouge">CMD</code>, it will run instantly just like a software program.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run octave-image-processing
</code></pre></div></div>

<p>When I say use Docker as a virtual machine, I mean you develop software interactively in Docker as if you are in a computer system. <code class="highlighter-rouge">-it</code> is used for interactive communication with the Docker container.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-it</span> octave-image-processing
</code></pre></div></div>

<h3 id="mount-local-directories-to-docker-container">Mount Local Directories to Docker Container</h3>

<p>Docker argument <code class="highlighter-rouge">-v</code> for running container allows you to bound the local directories to the directories in the Docker container. This facilitates the data streaming between local computer and Docker container.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">-v</span> /mnt/data/leimao:/mnt <span class="nt">-v</span> /home/leimao:/home octave-image-processing
</code></pre></div></div>

<p>It should be noted that sometimes you do not have writting permissions to the local directories. In my case, I have two workstations, workstation <code class="highlighter-rouge">alice</code> and <code class="highlighter-rouge">burning</code>, with my login name <code class="highlighter-rouge">marine</code>. The <code class="highlighter-rouge">marine</code> account has both reading and writting to both of the work stations. One of the hard drive of <code class="highlighter-rouge">alice</code> was mounted to <code class="highlighter-rouge">burning</code>. In <code class="highlighter-rouge">burning</code>, the <code class="highlighter-rouge">marine</code> account could also read and write on the hard drive of <code class="highlighter-rouge">alice</code> that is mounted on the <code class="highlighter-rouge">burning</code>. However, <code class="highlighter-rouge">alice</code> does not allow an account named <code class="highlighter-rouge">root</code> to write on the hard drive remotely. So in the Docker container of <code class="highlighter-rouge">burning</code>, I do not have writting permission to the hard drive of <code class="highlighter-rouge">alice</code> mounted on <code class="highlighter-rouge">burning</code> because <code class="highlighter-rouge">alice</code> sees me as <code class="highlighter-rouge">root</code>, instead of <code class="highlighter-rouge">marine</code>, on <code class="highlighter-rouge">burning</code>. In the Docker container of <code class="highlighter-rouge">alice</code>, I can write to the hard drive because <code class="highlighter-rouge">alice</code> know this <code class="highlighter-rouge">root</code> is from <code class="highlighter-rouge">marine</code> on the local machine.</p>

<h3 id="clean-trash-docker-images">Clean “Trash” Docker Images</h3>

<p>Sometimes, you want to clean some Docker images to free more disk space.</p>

<p><br /></p>

<p>To check all the images created on the computer:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker images
REPOSITORY                        TAG                   IMAGE ID            CREATED             SIZE
octave-image-processing           latest                9296aabfaedd        3 hours ago         1.16GB
slin/workspace                    latest                9216bcec9750        21 hours ago        5.37GB
python                            3.6.4                 07d72c0beb99        2 weeks ago         689MB
ubuntu                            16.04                 f975c5035748        5 weeks ago         112MB
nvidia/cuda                       9.0-cudnn7-devel      e2e0782eb2d9        5 weeks ago         2.86GB
nvidia/cuda                       9.1-cudnn7-devel      bfeba741488f        5 weeks ago         2.86GB
nvidia/cuda                       latest                f1cf7a94fb8b        5 weeks ago         2.23GB
tensorflow/tensorflow             latest                414b6e39764a        5 weeks ago         1.27GB
tensorflow/tensorflow             latest-gpu            aebd66be3e22        5 weeks ago         2.95GB
gcr.io/tensorflow/tensorflow      latest-gpu            aebd66be3e22        5 weeks ago         2.95GB
ubuntu                            latest                0458a4468cbc        2 months ago        112MB
ubuntu                            14.04                 dc4491992653        2 months ago        222MB
</code></pre></div></div>

<p>For example, to delete <code class="highlighter-rouge">octave-image-processing</code> created 3 hours ago using its <code class="highlighter-rouge">IMAGE ID</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker rmi <span class="nt">--force</span> 9296aabfaedd
</code></pre></div></div>

<p>We use <code class="highlighter-rouge">--force</code> because sometimes the container is still running on this image.</p>

<p><br /></p>

<p>Sometimes, you will find some images with name <code class="highlighter-rouge">&lt;none&gt;</code> that were images resulted of building failure. To remove them:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker rmi <span class="k">$(</span>docker images <span class="nt">--filter</span> <span class="s2">"dangling=true"</span> <span class="nt">-q</span> <span class="nt">--no-trunc</span><span class="k">)</span>
</code></pre></div></div>

<h3 id="choice-of-base-images">Choice of Base Images</h3>

<p>To build your own images, we have to use some base images from the <a href="https://hub.docker.com/explore/">Docker official repository</a> or some third-party repositories.</p>

<p><br /></p>

<p>Sometimes, to save the disk space, we would use the base image with minimum size that is necessary for the enviroment. However, this sometimes will bring troubles.</p>

<p><br /></p>

<p>For example, I had once want to install Python 3 and the latest Octave in the environment. I somehow chose a Python 3 image as my base image. Although I could still do <code class="highlighter-rouge">apt-get update</code> and <code class="highlighter-rouge">apt-get install</code> to install Octave, but the Octave installed would be a very old version. The personal package archives (PPA) which usually provides the latest version of Octave would also be problematic to use. Later, I changed my base image from Python 3 to Ubuntu 16.04, I was able to use PPA to install the latest Octave without any problem. So I guess many utilities used in Ubuntu were missing in the Python 3 base images.</p>

<h3 id="arg-vs-env">ARG vs ENV</h3>

<p>When writting <code class="highlighter-rouge">Dockerfile</code>, sometime you might be confused between <code class="highlighter-rouge">ARG</code> and <code class="highlighter-rouge">ENV</code>. This figure from <a href="https://vsupalov.com/docker-env-vars/">Vladislav Supalov</a> explained the difference very well.</p>

<div class="titled-image">
<figure class="titled-image">
    <img src="http://localhost:4000/images/blog/2018-04-12-Docker-Experience/arg_vs_env.png" />
    <figcaption>ARG vs ENV in Docker</figcaption>
</figure>
</div>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          
	<img src="http://localhost:4000/images//author_images/VinitSmall.jpg" class="bio-photo" alt="Vinit Sheth bio photo"></a>

<h3>Vinit Sheth</h3>
<p>Data Science , Machine Learning, Artificial Intelligence.</p>



<a href="http://linkedin.com/in/vinit-sheth" class="author-social" target="_blank"><i class="fa fa-linkedin-square"></i> LinkedIn</a>


<a href="http://github.com/vinitsheth" class="author-social" target="_blank"><i class="fa fa-github-square"></i> GitHub</a>









<a href="http://facebook.com/vinitgsheth" class="author-social" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>
<a href="mailto:vsheth2@asu.edu" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> E-Mail</a>
<a href="https://drive.google.com/open?id=1ElcWvlcYgbx_Pw4amAY230AAM5meI6zQ" class="author-social" target="_blank"><i class="fa fa-file"></i>Resume</a>
        </div>
       <!-- <p class="byline"><strong>Docker Beginner's Guide</strong> was published on <time datetime="2018-04-12T00:00:00-07:00">April 12, 2018</time> and last modified on <time datetime="2018-04-12">April 12, 2018</time> by <a href="http://localhost:4000" title="About Vinit Sheth">Vinit Sheth</a>.</p> -->
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2019 Vinit Sheth. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<!-- Old
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-133931159-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
-->
<!-- New -->
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-133931159-1', 'auto');
  ga('send', 'pageview');

</script>



  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vinitsheth-github-io'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	        

</body>
</html>