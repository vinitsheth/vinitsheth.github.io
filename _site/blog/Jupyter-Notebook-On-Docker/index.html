<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->

<head>
    <style type="text/css">
	    .article-wrap img{border-radius: 5px;}
		.titled-image figure{text-align: center;}
	</style>
	<meta charset="utf-8">
<title>Vinit Sheth's Website  &#8211; Jupyter Notebook on Docker </title>
<meta name="description" content="">
<meta name="keywords" content="Jupyter Notebook, Docker">




<!-- MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Jupyter Notebook on Docker">
<meta property="og:description" content="Welcome to my site.">
<meta property="og:url" content="http://localhost:4000/blog/Jupyter-Notebook-On-Docker/">
<meta property="og:site_name" content="Vinit Sheth's Website">





<link rel="canonical" href="http://localhost:4000/blog/Jupyter-Notebook-On-Docker/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Vinit Sheth's Website Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.min.css">
<link rel="stylesheet" href="http://localhost:4000/assets/academicons.css" />

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">

<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="192x192" href="http://localhost:4000/images/apple-icon-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://localhost:4000">Vinit Sheth's Website</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				<li><a href="http://localhost:4000/cv/" >Curriculum</a></li>
		        
				<li><a href="http://localhost:4000/projects/" >Projects</a></li>
		        
				<li><a href="http://localhost:4000/courses/" >Courses</a></li>
		        
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
	<img src="http://localhost:4000/images//author_images/VinitSmall.jpg" class="bio-photo" alt="Vinit Sheth bio photo"></a>

<h3>Vinit Sheth</h3>
<p>Data Science , Machine Learning, Artificial Intelligence.</p>



<a href="http://linkedin.com/in/vinit-sheth" class="author-social" target="_blank"><i class="fa fa-linkedin-square"></i> LinkedIn</a>


<a href="http://github.com/vinitsheth" class="author-social" target="_blank"><i class="fa fa-github-square"></i> GitHub</a>









<a href="http://facebook.com/vinitgsheth" class="author-social" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>
<a href="mailto:vsheth2@asu.edu" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> E-Mail</a>
<a href="https://drive.google.com/open?id=1ElcWvlcYgbx_Pw4amAY230AAM5meI6zQ" class="author-social" target="_blank"><i class="fa fa-file"></i>Resume</a>
  </div>
  <article>
    <div class="headline-wrap">
      
        <h1><a href="http://localhost:4000/blog/Jupyter-Notebook-On-Docker/" rel="bookmark" title="Jupyter Notebook on Docker">Jupyter Notebook on Docker</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <h3 id="introduction">Introduction</h3>

<p>Although I do not like using Jupyter Notebook due to its “bad” garbage collection mechanism, I still sometimes have to use it on the Docker. This blog documented the most basic protocols of connecting to the Jupyter Notebook running on the Docker on the remote sever from your local computer.</p>

<h3 id="protocols">Protocols</h3>

<h4 id="connect-ports-of-docker-container-to-server">Connect Ports of Docker Container to Server</h4>

<p>This is usually done via the <code class="highlighter-rouge">-p</code> argument of <code class="highlighter-rouge">docker run</code> command. Jupyter Notebook uses port <code class="highlighter-rouge">8888</code> by default, so we connect the port <code class="highlighter-rouge">8888</code> (<code class="highlighter-rouge">0.0.0.0:8888</code>) on Docker container to the port <code class="highlighter-rouge">5000</code> (<code class="highlighter-rouge">0.0.0.0:5000</code>) on the sever.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>nvidia-docker run <span class="nt">-it</span> <span class="nt">--name</span> leimao-speech-instance <span class="nt">-v</span> /home/leimao/workspace:/workspace <span class="nt">-p</span> 5000:8888 <span class="nt">-p</span> 5001:6006 leimao/speech
</code></pre></div></div>
<p>To exit the docker container while keep the container running in the backgroud, click <code class="highlighter-rouge">Ctrl</code> + <code class="highlighter-rouge">P</code> + <code class="highlighter-rouge">Ctrl</code> + <code class="highlighter-rouge">Q</code>.</p>

<p><br /></p>

<p>Run <code class="highlighter-rouge">docker container ls</code> to check if we have connected the port successfully.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker container <span class="nb">ls
</span>CONTAINER ID        IMAGE                        COMMAND             CREATED             STATUS              PORTS                                              NAMES
05ee0d5a5a0e        leimao/speech                <span class="s2">"/bin/bash"</span>         About an hour ago   Up 8 seconds        0.0.0.0:5001-&gt;6006/tcp, 0.0.0.0:5000-&gt;8888/tcp     leimao-speech-instance
</code></pre></div></div>

<h4 id="ssh-to-server">SSH to Server</h4>

<p>To connect the local port to the server port, in our local terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh <span class="nt">-L</span> 127.0.0.1:16006:0.0.0.0:5000 username@server
</code></pre></div></div>
<p>We use the full port name because sometimes there are warnings from the server terminal if we do not do so.</p>

<h4 id="restart-docker-container">Restart Docker Container</h4>

<p>To restart the docker container, in our server terminal:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker start <span class="nt">-i</span> 05ee0d5a5a0e 
</code></pre></div></div>
<h4 id="start-jupyter-notebook">Start Jupyter Notebook</h4>

<p>To start jupyter notebook, go to the <code class="highlighter-rouge">workspace</code> directory and use the following command in our docker container terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>jupyter notebook <span class="nt">--ip</span> 0.0.0.0 <span class="nt">--port</span> 8888 <span class="nt">--allow-root</span> &amp;
</code></pre></div></div>
<p><code class="highlighter-rouge">--allow-root</code> argument sometimes prevents weird errors.</p>

<p><br /></p>

<p>The <code class="highlighter-rouge">&amp;</code> sign is used to run Jupyter Notebook in the background.</p>

<p><br /></p>

<p>After starting Jupyter Notebook successfully, we will receive such message:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>I 13:46:05.790 NotebookApp] Serving notebooks from <span class="nb">local </span>directory: /
<span class="o">[</span>I 13:46:05.790 NotebookApp] 0 active kernels
<span class="o">[</span>I 13:46:05.790 NotebookApp] The Jupyter Notebook is running at:
<span class="o">[</span>I 13:46:05.790 NotebookApp] http://aa01088dd584:8888/?token<span class="o">=</span>7b3ffc8481d4a664f3d44dcb418af5a2492087711adf7649
<span class="o">[</span>I 13:46:05.790 NotebookApp] Use Control-C to stop this server and shut down all kernels <span class="o">(</span>twice to skip confirmation<span class="o">)</span><span class="nb">.</span>
<span class="o">[</span>W 13:46:05.790 NotebookApp] No web browser found: could not locate runnable browser.
<span class="o">[</span>C 13:46:05.790 NotebookApp] 
    
    Copy/paste this URL into your browser when you connect <span class="k">for </span>the first <span class="nb">time</span>,
    to login with a token:
        http://aa01088dd584:8888/?token<span class="o">=</span>7b3ffc8481d4a664f3d44dcb418af5a2492087711adf7649&amp;token<span class="o">=</span>7b3ffc8481d4a664f3d44dcb418af5a2492087711adf7649
</code></pre></div></div>

<p>Use <code class="highlighter-rouge">Ctrl</code> + <code class="highlighter-rouge">P</code> + <code class="highlighter-rouge">Ctrl</code> + <code class="highlighter-rouge">Q</code> to exit the docker container while keep the container running in the backgroud if necessary.</p>

<p><br /></p>

<p>To kill Jupyter Notebook process in the background if necessary, we first check the PID (Process ID) of Jupyter Notebook using <code class="highlighter-rouge">top</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>top
top - 16:24:57 up 69 days, 23:50,  0 users,  load average: 0.01, 0.29, 0.50
Tasks:   3 total,   1 running,   2 sleeping,   0 stopped,   0 zombie
%Cpu<span class="o">(</span>s<span class="o">)</span>:  0.0 us,  0.1 sy,  0.0 ni, 99.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 63850140 total, 11136512 free,  2106536 used, 50607092 buff/cache
KiB Swap:  4194300 total,  4191240 free,     3060 used. 60739944 avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND    
    1 root      20   0   18228   1976   1504 S   0.0  0.0   0:00.03 bash        
   49 root      20   0  325408  50080   8924 S   0.0  0.1   0:00.64 jupyter-no+ 
   56 root      20   0  598748  39508   7016 S   0.0  0.1   0:00.31 python      
   73 root      20   0   36628   1672   1248 R   0.0  0.0   0:00.01 top         
</code></pre></div></div>
<p>In our case, the PID of Jupyter Notebook is <code class="highlighter-rouge">49</code>. We could kill the process in terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">kill</span> <span class="nt">-09</span> 49
</code></pre></div></div>

<h4 id="use-jupyter-notebook-locally">Use Jupyter Notebook Locally</h4>

<p>Open web browser, such as Chrome, and go to the url <code class="highlighter-rouge">http://127.0.0.1:16006</code>. Input token <code class="highlighter-rouge">7b3ffc8481d4a664f3d44dcb418af5a2492087711adf7649</code> as requested. Alternatively, use the url provided in the message we saw after starting the Jupyter Notebook for the first time connection and do not forget to replace <code class="highlighter-rouge">http://aa01088dd584:8888</code> to <code class="highlighter-rouge">http://127.0.0.1:16006</code>.</p>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          
	<img src="http://localhost:4000/images//author_images/VinitSmall.jpg" class="bio-photo" alt="Vinit Sheth bio photo"></a>

<h3>Vinit Sheth</h3>
<p>Data Science , Machine Learning, Artificial Intelligence.</p>



<a href="http://linkedin.com/in/vinit-sheth" class="author-social" target="_blank"><i class="fa fa-linkedin-square"></i> LinkedIn</a>


<a href="http://github.com/vinitsheth" class="author-social" target="_blank"><i class="fa fa-github-square"></i> GitHub</a>









<a href="http://facebook.com/vinitgsheth" class="author-social" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>
<a href="mailto:vsheth2@asu.edu" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> E-Mail</a>
<a href="https://drive.google.com/open?id=1ElcWvlcYgbx_Pw4amAY230AAM5meI6zQ" class="author-social" target="_blank"><i class="fa fa-file"></i>Resume</a>
        </div>
       <!-- <p class="byline"><strong>Jupyter Notebook on Docker</strong> was published on <time datetime="2018-05-21T00:00:00-07:00">May 21, 2018</time> and last modified on <time datetime="2018-05-15">May 15, 2018</time> by <a href="http://localhost:4000" title="About Vinit Sheth">Vinit Sheth</a>.</p> -->
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2019 Vinit Sheth. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<!-- Old
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-133931159-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
-->
<!-- New -->
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-133931159-1', 'auto');
  ga('send', 'pageview');

</script>



  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vinitsheth-github-io'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	        

</body>
</html>