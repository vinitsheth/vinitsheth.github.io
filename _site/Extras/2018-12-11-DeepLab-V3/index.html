<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->

<head>
    <style type="text/css">
	    .article-wrap img{border-radius: 5px;}
		.titled-image figure{text-align: center;}
	</style>
	<meta charset="utf-8">
<title>Vinit Sheth's Website  &#8211; Semantic Segmentation Using DeepLab V3 </title>
<meta name="description" content="">
<meta name="keywords" content="Deep Learning, Computer Vision, Semantic Segmentation">




<!-- MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Semantic Segmentation Using DeepLab V3">
<meta property="og:description" content="Welcome to my site.">
<meta property="og:url" content="http://localhost:4000/Extras/2018-12-11-DeepLab-V3/">
<meta property="og:site_name" content="Vinit Sheth's Website">





<link rel="canonical" href="http://localhost:4000/Extras/2018-12-11-DeepLab-V3/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Vinit Sheth's Website Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.min.css">
<link rel="stylesheet" href="http://localhost:4000/assets/academicons.css" />

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">

<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="192x192" href="http://localhost:4000/images/apple-icon-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://localhost:4000">Vinit Sheth's Website</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				<li><a href="http://localhost:4000/cv/" >Curriculum</a></li>
		        
				<li><a href="http://localhost:4000/projects/" >Projects</a></li>
		        
				<li><a href="http://localhost:4000/courses/" >Courses</a></li>
		        
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
	<img src="http://localhost:4000/images//author_images/VinitSmall.jpg" class="bio-photo" alt="Vinit Sheth bio photo"></a>

<h3>Vinit Sheth</h3>
<p>Data Science , Machine Learning, Artificial Intelligence.</p>



<a href="http://linkedin.com/in/vinit-sheth" class="author-social" target="_blank"><i class="fa fa-linkedin-square"></i> LinkedIn</a>


<a href="http://github.com/vinitsheth" class="author-social" target="_blank"><i class="fa fa-github-square"></i> GitHub</a>









<a href="http://facebook.com/vinitgsheth" class="author-social" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>
<a href="mailto:vsheth2@asu.edu" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> E-Mail</a>
<a href="https://drive.google.com/open?id=1ElcWvlcYgbx_Pw4amAY230AAM5meI6zQ" class="author-social" target="_blank"><i class="fa fa-file"></i>Resume</a>
  </div>
  <article>
    <div class="headline-wrap">
      
        <h1><a href="http://localhost:4000/Extras/2018-12-11-DeepLab-V3/" rel="bookmark" title="Semantic Segmentation Using DeepLab V3">Semantic Segmentation Using DeepLab V3</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <h2 id="introduction">Introduction</h2>

<p>DeepLab is a series of image semantic segmentation models, whose latest version, i.e. v3+, proves to be the state-of-art. Its major contribution is the use of atrous spatial pyramid pooling (ASPP) operation at the end of the encoder. While the model works extremely well, its open sourced code is hard to read. Here we reimplemented DeepLab v3, the earlier version of v3+, which only additionally employs the decoder architecture, in a much simpler and understandable way. This is a collaborative project developed by me and Shengjie Lin from Toyota Technological Institute at Chicago.</p>

<h2 id="dependencies">Dependencies</h2>

<ul>
  <li>Python 3.5</li>
  <li>TensorFlow 1.8</li>
  <li>Tqdm 4.26.0</li>
  <li>Numpy 1.14</li>
  <li>OpenCV 3.4.3</li>
  <li>Pillow 5.3.0</li>
</ul>

<h2 id="files">Files</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── archieved
├── download.py
├── feature_extractor.py
├── LICENSE.md
├── model.py
├── modules.py
├── nets
├── README.md
├── test_demo.py
├── train.py
└── utils.py
</code></pre></div></div>

<p>The <code class="highlighter-rouge">nets</code> directory contains network definition files that are directly copied from <a href="https://github.com/tensorflow/models/tree/master/research/slim/nets"><code class="highlighter-rouge">tensorflow/models/research/slim/nets</code></a></p>

<h2 id="usages">Usages</h2>

<h3 id="download-dataset">Download Dataset</h3>

<p>Download and extract VOC2012 dataset, SBD dataset, and pretrained models to designated directories.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python download.py <span class="nt">--help</span>
usage: download.py <span class="o">[</span><span class="nt">-h</span><span class="o">]</span> <span class="o">[</span><span class="nt">--downloads_dir</span> DOWNLOADS_DIR] <span class="o">[</span><span class="nt">--data_dir</span> DATA_DIR]
                   <span class="o">[</span><span class="nt">--pretrained_models_dir</span> PRETRAINED_MODELS_DIR]
                   <span class="o">[</span><span class="nt">--pretrained_models</span> PRETRAINED_MODELS <span class="o">[</span>PRETRAINED_MODELS ...]]

Download DeepLab semantic segmentation datasets and pretrained backbone
models.

optional arguments:
  <span class="nt">-h</span>, <span class="nt">--help</span>            show this <span class="nb">help </span>message and <span class="nb">exit</span>
  <span class="nt">--downloads_dir</span> DOWNLOADS_DIR
                        Downloads directory
  <span class="nt">--data_dir</span> DATA_DIR   Data directory
  <span class="nt">--pretrained_models_dir</span> PRETRAINED_MODELS_DIR
                        Pretrained models directory
  <span class="nt">--pretrained_models</span> PRETRAINED_MODELS <span class="o">[</span>PRETRAINED_MODELS ...]
                        Pretrained models to download: resnet_50, resnet_101,
                        mobilenet_1.0_224
</code></pre></div></div>

<p>For example, to download and extract datasets and models into directories specified:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python download.py <span class="nt">--downloads_dir</span> ./downloads <span class="nt">--data_dir</span> ./data <span class="nt">--pretrained_models_dir</span> ./models/pretrained <span class="nt">--pretrained_models</span> resnet_50 resnet_101 mobilenet_1.0_224
</code></pre></div></div>

<p>For simplicity, please just run the following command in terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python download.py
</code></pre></div></div>

<h3 id="train-model">Train Model</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python train.py <span class="nt">--help</span>
usage: train.py <span class="o">[</span><span class="nt">-h</span><span class="o">]</span> <span class="o">[</span><span class="nt">--network_backbone</span> NETWORK_BACKBONE]
                <span class="o">[</span><span class="nt">--pre_trained_model</span> PRE_TRAINED_MODEL]
                <span class="o">[</span><span class="nt">--trainset_filename</span> TRAINSET_FILENAME]
                <span class="o">[</span><span class="nt">--valset_filename</span> VALSET_FILENAME] <span class="o">[</span><span class="nt">--images_dir</span> IMAGES_DIR]
                <span class="o">[</span><span class="nt">--labels_dir</span> LABELS_DIR]
                <span class="o">[</span><span class="nt">--trainset_augmented_filename</span> TRAINSET_AUGMENTED_FILENAME]
                <span class="o">[</span><span class="nt">--images_augmented_dir</span> IMAGES_AUGMENTED_DIR]
                <span class="o">[</span><span class="nt">--labels_augmented_dir</span> LABELS_AUGMENTED_DIR]
                <span class="o">[</span><span class="nt">--model_dir</span> MODEL_DIR] <span class="o">[</span><span class="nt">--log_dir</span> LOG_DIR]
                <span class="o">[</span><span class="nt">--random_seed</span> RANDOM_SEED]

Train DeepLab v3 <span class="k">for </span>image semantic segmantation.

optional arguments:
  <span class="nt">-h</span>, <span class="nt">--help</span>            show this <span class="nb">help </span>message and <span class="nb">exit</span>
  <span class="nt">--network_backbone</span> NETWORK_BACKBONE
                        Network backbones: resnet_50, resnet_101,
                        mobilenet_1.0_224. Default: resnet_101
  <span class="nt">--pre_trained_model</span> PRE_TRAINED_MODEL
                        Pretrained model directory
  <span class="nt">--trainset_filename</span> TRAINSET_FILENAME
                        Train dataset filename
  <span class="nt">--valset_filename</span> VALSET_FILENAME
                        Validation dataset filename
  <span class="nt">--images_dir</span> IMAGES_DIR
                        Images directory
  <span class="nt">--labels_dir</span> LABELS_DIR
                        Labels directory
  <span class="nt">--trainset_augmented_filename</span> TRAINSET_AUGMENTED_FILENAME
                        Train augmented dataset filename
  <span class="nt">--images_augmented_dir</span> IMAGES_AUGMENTED_DIR
                        Images augmented directory
  <span class="nt">--labels_augmented_dir</span> LABELS_AUGMENTED_DIR
                        Labels augmented directory
  <span class="nt">--model_dir</span> MODEL_DIR
                        Trained model saving directory
  <span class="nt">--log_dir</span> LOG_DIR     TensorBoard log directory
  <span class="nt">--random_seed</span> RANDOM_SEED
                        Random seed <span class="k">for </span>model training.
</code></pre></div></div>

<p>For simplicity, please run the following command in terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python train.py
</code></pre></div></div>

<p>With learning rate of <code class="highlighter-rouge">1e-5</code>, the mIOU could be greater 0.7 after 20 epochs, which is comparable to the test statistics of DeepLab v3 in the publication.</p>

<h3 id="demos">Demos</h3>

<p>To show some demos, please run the following command in terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python test_demo.py
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Image</th>
      <th style="text-align: center">Label</th>
      <th style="text-align: center">Prediction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_0.jpg" alt="" /></td>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_0_label.png" alt="" /></td>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_0_prediction.png" alt="" /></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Image</th>
      <th style="text-align: center">Label</th>
      <th style="text-align: center">Prediction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_1.jpg" alt="" /></td>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_1_label.png" alt="" /></td>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_1_prediction.png" alt="" /></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Image</th>
      <th style="text-align: center">Label</th>
      <th style="text-align: center">Prediction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_2.jpg" alt="" /></td>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_2_label.png" alt="" /></td>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_2_prediction.png" alt="" /></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Image</th>
      <th style="text-align: center">Label</th>
      <th style="text-align: center">Prediction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_3.jpg" alt="" /></td>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_3_label.png" alt="" /></td>
      <td style="text-align: center"><img src="/images/projects/2018-12-11-DeepLab-V3/image_3_prediction.png" alt="" /></td>
    </tr>
  </tbody>
</table>

<h2 id="references">References</h2>

<p>L.-C. Chen, G. Papandreou, I. Kokkinos, K. Murphy, and A. L. Yuille. <a href="https://arxiv.org/abs/1606.00915">Deeplab: Semantic Image Segmentation with Deep Convolutional Nets, Atrous Convolution, and Fully Connected CRFs</a>. TPAMI, 2017.</p>

<p>L.-C. Chen, G. Papandreou, F. Schroff, and H. Adam. <a href="https://arxiv.org/abs/1706.05587">Rethinking Atrous Convolution for Semantic Image Segmentation</a>. arXiv:1706.05587, 2017.</p>

<p>L.-C. Chen, Y. Zhu, G. Papandreou, F. Schroff, H. Adam. <a href="https://arxiv.org/abs/1802.02611">Encoder-Decoder with Atrous Separable Convolution for Semantic Image Segmentation</a>. arXiv:1802.02611, 2018.</p>

<h2 id="github">GitHub</h2>

<p><a href="https://github.com/leimao/DeepLab_v3">DeepLab v3</a></p>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          
	<img src="http://localhost:4000/images//author_images/VinitSmall.jpg" class="bio-photo" alt="Vinit Sheth bio photo"></a>

<h3>Vinit Sheth</h3>
<p>Data Science , Machine Learning, Artificial Intelligence.</p>



<a href="http://linkedin.com/in/vinit-sheth" class="author-social" target="_blank"><i class="fa fa-linkedin-square"></i> LinkedIn</a>


<a href="http://github.com/vinitsheth" class="author-social" target="_blank"><i class="fa fa-github-square"></i> GitHub</a>









<a href="http://facebook.com/vinitgsheth" class="author-social" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>
<a href="mailto:vsheth2@asu.edu" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> E-Mail</a>
<a href="https://drive.google.com/open?id=1ElcWvlcYgbx_Pw4amAY230AAM5meI6zQ" class="author-social" target="_blank"><i class="fa fa-file"></i>Resume</a>
        </div>
       <!-- <p class="byline"><strong>Semantic Segmentation Using DeepLab V3</strong> was published on <time datetime=""></time> and last modified on <time datetime="2018-12-11">December 11, 2018</time> by <a href="http://localhost:4000" title="About Vinit Sheth">Vinit Sheth</a>.</p> -->
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2019 Vinit Sheth. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<!-- Old
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-133931159-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
-->
<!-- New -->
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-133931159-1', 'auto');
  ga('send', 'pageview');

</script>



  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vinitsheth-github-io'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	        

</body>
</html>